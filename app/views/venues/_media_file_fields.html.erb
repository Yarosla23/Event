<div class="nested-fields p-4 border border-gray-200 rounded-lg mb-4">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="field">
      <%= f.label :title, "Название", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
      <%= f.text_field :title, 
          class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",
          placeholder: "Введите название файла" %>
    </div>

    <div class="field">
      <%= f.label :description, "Описание", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
      <%= f.text_area :description, 
          class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",
          placeholder: "Введите описание файла" %>
    </div>

    <div class="field col-span-2">
      <%= f.label :file, "Файл", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
      <%= f.file_field :file, 
          class: "block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none focus:ring focus:ring-indigo-300",
          accept: "image/*,video/*" %>
      
      <% if f.object.file.present? %>
        <div class="mt-2">
          <% if f.object.file_type == 'image' %>
            <%= image_tag f.object.file.url, class: "h-20 w-20 object-cover rounded" %>
          <% elsif f.object.file_type == 'video' %>
            <video class="h-20 w-20 object-cover rounded" controls>
              <source src="<%= f.object.file.url %>" type="<%= f.object.content_type %>">
            </video>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="mt-4 flex justify-end">
    <%= link_to_remove_association "Удалить", f, 
        class: "text-red-500 hover:text-red-700" %>
  </div>
</div> 